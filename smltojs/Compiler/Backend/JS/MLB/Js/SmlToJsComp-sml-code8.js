if ((typeof(smltojs0$SmlToJsComp$$8)) == "undefined") {smltojs0$SmlToJsComp$$8 = {};
};
(function(){smltojs0$SmlToJsComp$$8.die$2738 = function(s$2741){return tools$Crash$.impossible$50("IntModules." + s$2741);
};
smltojs0$SmlToJsComp$$8.print_error_report$2742 = function(report$2745){return tools$Report$.print$$233(report$2745,tools$Flags$$1.log$92[0]);
};
smltojs0$SmlToJsComp$$8.log$2746 = function(s$2749){return basis$TextIO$.output$101(tools$Flags$$1.log$92[0],s$2749);
};
smltojs0$SmlToJsComp$$8.chat$2750 = function(s$2753){if (tools$Flags$$1.chat$77[0]) {var s$4248 = s$2753 + "\n";
return basis$TextIO$.output$101(tools$Flags$$1.log$92[0],s$4248);
} else {return 0;
};
};
smltojs0$SmlToJsComp$$8.cleanBucket$2758 = function(v$2760){var fix$4810 = {};
fix$4810.$app = function(v$4252){lab$app: while (true) {if (v$4252 == null) {return 0;
} else {var v$4253 = v$4252;
var v$4254 = v$4253[0];
var v$4255 = v$4253[1];
if (v$4254[0][2]) {0;
} else {var v$4259 = v$4254[0][1];
(v$4254[0] = [[false],v$4259,true],0);
};
var t$4811 = v$4255;
var v$4252 = t$4811;
continue lab$app;
};
};
};
var app$4251 = fix$4810.$app;
app$4251(special_objects$Name$.bucket$135[0]);
return (special_objects$Name$.bucket$135[0] = null,0);
};
smltojs0$SmlToJsComp$$8.withFile$2763 = function(f$2766,s$2769){var is$2770 = basis$TextIO$.openIn$160(s$2769);
try {var a$2771 = f$2766(is$2770);
basis$TextIO$.closeIn$163(is$2770);
return a$2771;
} catch(v$4812) {return (function(s$m$2776){basis$TextIO$.closeIn$163(is$2770);
throw s$m$2776;
})(v$4812);
};
};
smltojs0$SmlToJsComp$$8.writeFile$2779 = function(f$2782,t$2785){var os$2786 = basis$TextIO$.openOut$99(f$2782);
try {basis$TextIO$.output$101(os$2786,t$2785);
return basis$TextIO$.closeOut$120(os$2786);
} catch(v$4813) {return (function(s$m$2791){basis$TextIO$.closeOut$120(os$2786);
throw s$m$2791;
})(v$4813);
};
};
var fix$4814 = {};
fix$4814.$pr_tynames = function(v$2797){lab$pr_tynames: while (true) {if (v$2797 == null) {return "";
} else {var v$2807 = v$2797;
var v$2808 = v$2807[1];
if (v$2808 == null) {var v$2809 = v$2807[0];
return special_objects$TyName$$1.pr_TyName$289(v$2809[0],v$2809[1],v$2809[2],v$2809[3],v$2809[4],v$2809[5]);
} else {var v$2810 = v$2807[0];
return ((special_objects$TyName$$1.pr_TyName$289(v$2810[0],v$2810[1],v$2810[2],v$2810[3],v$2810[4],v$2810[5])) + ", ") + (fix$4814.$pr_tynames(v$2808));
};
};
};
};
smltojs0$SmlToJsComp$$8.pr_tynames$2794 = fix$4814.$pr_tynames;
smltojs0$SmlToJsComp$$8.print_basis$2811 = function(B$2814){return tools$PrettyPrint$.outputTree$1071([function(v$4808){return basis$General$.print$156(v$4808);
},basics$ModuleEnvironments$.layout$510(B$2814),100]);
};
smltojs0$SmlToJsComp$$8.print_intbasis$2815 = function(ib$2818){return tools$PrettyPrint$.outputTree$1071([function(v$4809){return basis$General$.print$156(v$4809);
},smltojs0$SmlToJsComp$$4.layout$976(ib$2818),100]);
};
smltojs0$SmlToJsComp$$8.out_functor_application$2819 = function(s$2822){var os$2824 = basis$TextIO$.openAppend$100("/tmp/functor_apps.txt");
basis$TextIO$.output$101(os$2824,s$2822 + "\n");
return basis$TextIO$.closeOut$120(os$2824);
};
smltojs0$SmlToJsComp$$8.to_TypeInfo$2827 = function(i$2830){var v$2835 = basics$ElabInfo$.to_TypeInfo$192(i$2830);
switch (v$2835[0]) { case 0: {var v$2837 = v$2835[1];
return [0,basics$TypeInfo$.normalise$301(v$2837)];
 break; }default: {return [1];
} };
};
smltojs0$SmlToJsComp$$8.s$ee$2838 = function(v$4793){return basis$Path$.concat$209(v$4793[0],v$4793[1]);
};
var counter$2839 = [0];
smltojs0$SmlToJsComp$$8.fresh_unitname$2845 = function(v$2847){var t$4816 = basis$Int32$.toString$449;
var t$4815;
(counter$2839[0] = (SmlPrims.chk_ovf_i32(counter$2839[0] + 1)),0);
t$4815 = counter$2839[0];
return t$4816(t$4815);
};
smltojs0$SmlToJsComp$$8.reset_unitname_counter$2848 = function(v$2850){return (counter$2839[0] = 0,0);
};
smltojs0$SmlToJsComp$$8.on_ElabInfo$2851 = function(phi$2854,i$2857){var v$2862;
var v$4272 = basics$ElabInfo$.to_TypeInfo$192(i$2857);
switch (v$4272[0]) { case 0: {var v$4273 = v$4272[1];
v$2862 = [0,basics$TypeInfo$.normalise$301(v$4273)];
 break; }default: {v$2862 = [1];
} };
switch (v$2862[0]) { case 0: {var v$2864 = v$2862[1];
return basics$ElabInfo$.plus_TypeInfo$118(i$2857,basics$TypeInfo$.on_TypeInfo$297([phi$2854,v$2864]));
 break; }default: {return i$2857;
} };
};
smltojs0$SmlToJsComp$$8.extract_strexp_from_topdec$2865 = function(v$4794,v$2900){switch (v$2900[0]) { case 0: {var v$2878 = v$2900[1];
switch (v$2878[2][0]) { case 1: {var v$2897 = v$2878[1];
switch (v$2897[0]) { case 0: {var v$2894 = v$2897[1];
var v$2895 = v$2894[1];
var v$2891 = v$2895[1];
switch (v$2891[3][0]) { case 1: {return v$2891[2];
 break; }default: {return tools$Crash$.impossible$50("IntModules.extract_strexp_from_topdec.no (or more than one) structure binding");
} };
 break; }default: {return tools$Crash$.impossible$50("IntModules.extract_strexp_from_topdec.no structure binding");
} };
 break; }default: {return tools$Crash$.impossible$50("IntModules.extract_strexp_from_topdec.no (or more than one) structure declaration");
} };
 break; }default: {return tools$Crash$.impossible$50("IntModules.extract_strexp_from_topdec.no (or more than one) structure declaration");
} };
};
smltojs0$SmlToJsComp$$8.derived_form_repair$2901 = function(v$2951,v$2952,v$2953){switch (v$2951[0]) { case 1: {return v$2953;
 break; }default: {var v$2950 = v$2951[1];
switch (v$2953[0]) { case 0: {var v$2925 = v$2953[1];
var v$2926 = v$2925[1];
switch (v$2926[0]) { case 0: {var v$2928 = v$2926[1];
var v$2929 = v$2928[1];
var v$2930 = v$2929[1];
switch (v$2930[3][0]) { case 1: {switch (v$2925[2][0]) { case 1: {var v$2944 = v$2925[0];
var v$2945 = v$2928[0];
var v$2946 = v$2930[0];
var v$2947 = v$2930[1];
var v$2948 = v$2930[2];
var open_info$2933;
var t$4820 = basics$ElabInfo$.plus_TypeInfo$118;
var t$4819 = v$2944;
var t$4818;
var t$4817;
var v$2938 = basics$Environments$.un$2322(v$2950);
var v$2939 = v$2938[0];
var v$2940 = v$2938[1];
var v$2941 = v$2938[2];
t$4817 = [edlib$EqSet$.list$98(basics$Environments$.dom$2141(v$2939)),edlib$EqSet$.list$98(basics$Environments$.dom$1795(v$2940)),edlib$EqSet$.list$98(basics$Environments$.dom$1145(v$2941))];
t$4818 = [7,t$4817];
open_info$2933 = (t$4820(t$4819,t$4818));
return [0,[v$2944,[0,[v$2945,[0,[v$2946,v$2947,[4,[v$2945,[4,[v$2944,[4,[open_info$2933,[[0,[open_info$2933,syntax_objects$StrId$.longStrIdOfStrId$121(v$2952)]],null]]]]],v$2948]],[1]]]]],[1]]];
 break; }default: {return tools$Crash$.impossible$50("IntModules.derived_form_repair.topdec is not a single structure binding.");
} };
 break; }default: {return tools$Crash$.impossible$50("IntModules.derived_form_repair.topdec is not a single structure binding.");
} };
 break; }default: {return tools$Crash$.impossible$50("IntModules.derived_form_repair.topdec is not a single structure binding.");
} };
 break; }default: {return tools$Crash$.impossible$50("IntModules.derived_form_repair.topdec is not a single structure binding.");
} };
} };
};
smltojs0$SmlToJsComp$$8.reelaborate$2954 = function(v$3115,v$3116,v$3117){try {var v$3081;
if (syntax_objects$StrId$.invented_StrId$113(v$3116)) {var E$3088;
var v$3093 = (basics$ModuleEnvironments$.lookup_strid$563(v$3117[2]))(v$3116);
switch (v$3093[0]) { case 0: {E$3088 = v$3093[1];
 break; }default: {E$3088 = (tools$Crash$.impossible$50("IntModules.reelaborate.strid not in elabB"));
} };
v$3081 = [basics$ModuleEnvironments$.plus_E$528(v$3117[2],E$3088),[0,E$3088]];
} else {v$3081 = [v$3117[2],[1]];
};
var v$3082 = v$3081[0];
var v$3083 = v$3081[1];
var names_old$2963 = special_objects$Name$.bucket$135[0];
(special_objects$Name$.bucket$135[0] = null,0);
var res$2964 = basics$ParseElab$.parse_elab$266(v$3117[1],v$3082,v$3117[5],[0,v$3117[4]]);
switch (res$2964[0]) { case 1: {var v$2992 = res$2964[1];
var v$2993 = v$2992[0];
tools$Report$.print$$233(v$2993,tools$Flags$$1.log$92[0]);
return tools$Crash$.impossible$50("IntModules.reelaborate.ParseElab.FAILURE");
 break; }default: {var v$3078 = res$2964[1];
var v$3079 = v$3078[0];
var v$3080 = v$3078[3];
var resE$$2995;
var v$3000 = (basics$ModuleEnvironments$.lookup_strid$563(v$3079))(syntax_objects$StrId$.mk_StrId$94(syntax_objects$FunId$.pr_FunId$51(v$3115)));
switch (v$3000[0]) { case 0: {resE$$2995 = v$3000[1];
 break; }default: {resE$$2995 = (tools$Crash$.impossible$50("IntModules.reelaborate.the builder has been applied - but I cannot find `funid' in resulting structure env."));
} };
var topdec$3003 = smltojs0$SmlToJsComp$$8.derived_form_repair$2901(v$3083,v$3116,v$3080);
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[opacity elimination begin...]\n")):0;
var v$3071;
var v$4806 = v$3117[6];
v$3071 = (basics$OpacityElim$.opacity_elimination$1566(v$4806,topdec$3003));
var v$3072 = v$3071[0];
var v$3073 = v$3071[1];
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[opacity elimination end...]\n")):0;
var resE$$3011 = basics$Environments$.on_Env$3631(v$3073[1],resE$$2995);
var resE$$3012 = basics$Environments$.on_Env$3631(v$3117[6][1],resE$$3011);
var names_elab$3017 = special_objects$Name$.bucket$135[0];
(special_objects$Name$.bucket$135[0] = names_old$2963,0);
var fix$4822 = {};
fix$4822.$app = function(v$4326){lab$app: while (true) {if (v$4326 == null) {return 0;
} else {var v$4327 = v$4326;
var v$4328 = v$4327[0];
var v$4329 = v$4327[1];
(v$4328[2][0][0][0] = true,0);
var t$4823 = v$4329;
var v$4326 = t$4823;
continue lab$app;
};
};
};
var app$4325 = fix$4822.$app;
app$4325(v$3117[0]);
var fix$4824 = {};
fix$4824.$app = function(v$4338){lab$app: while (true) {if (v$4338 == null) {return 0;
} else {var v$4339 = v$4338;
var v$4340 = v$4339[0];
var v$4341 = v$4339[1];
(v$4340[0][0][0] = true,0);
var t$4825 = v$4341;
var v$4338 = t$4825;
continue lab$app;
};
};
};
var app$4337 = fix$4824.$app;
app$4337(names_elab$3017);
(special_objects$Name$.rematching$176[0] = true,0);
basics$Environments$.match$3037(resE$$3012,v$3117[7]);
(special_objects$Name$.rematching$176[0] = false,0);
var fix$4826 = {};
fix$4826.$app = function(v$4348){lab$app: while (true) {if (v$4348 == null) {return 0;
} else {var v$4349 = v$4348;
var v$4350 = v$4349[0];
var v$4351 = v$4349[1];
(v$4350[2][0][0][0] = false,0);
var t$4827 = v$4351;
var v$4348 = t$4827;
continue lab$app;
};
};
};
var app$4347 = fix$4826.$app;
app$4347(v$3117[0]);
var fix$4828 = {};
fix$4828.$app = function(v$4360){lab$app: while (true) {if (v$4360 == null) {return 0;
} else {var v$4361 = v$4360;
var v$4362 = v$4361[0];
var v$4363 = v$4361[1];
(v$4362[0][0][0] = false,0);
var t$4829 = v$4363;
var v$4360 = t$4829;
continue lab$app;
};
};
};
var app$4359 = fix$4828.$app;
app$4359(names_elab$3017);
if (basics$Environments$.eq$2980([v$3117[7],resE$$3012])) {0;
} else {basis$General$.print$156("Check on environments failed\n");
basis$General$.print$156("\nresE = \n");
tools$PrettyPrint$.printTree$1078(basics$Environments$.layout$2532(v$3117[7]));
basis$General$.print$156("\nresE' = \n");
tools$PrettyPrint$.printTree$1078(basics$Environments$.layout$2532(resE$$3012));
basis$General$.print$156(("\nT = {" + (smltojs0$SmlToJsComp$$8.pr_tynames$2794(v$3117[0]))) + "}\n");
tools$Crash$.impossible$50("IntModules.reelaborate.the builder has been applied - but the result environments are not equal (after matching.)");
};
switch (v$3072[0]) { case 0: {var v$4752 = v$3072[1];
switch (v$4752[2][0]) { case 1: {var v$4753 = v$4752[1];
switch (v$4753[0]) { case 0: {var v$4754 = v$4753[1];
var v$4755 = v$4754[1];
var v$4756 = v$4755[1];
switch (v$4756[3][0]) { case 1: {return v$4756[2];
 break; }default: {return tools$Crash$.impossible$50("IntModules.extract_strexp_from_topdec.no (or more than one) structure binding");
} };
 break; }default: {return tools$Crash$.impossible$50("IntModules.extract_strexp_from_topdec.no structure binding");
} };
 break; }default: {return tools$Crash$.impossible$50("IntModules.extract_strexp_from_topdec.no (or more than one) structure declaration");
} };
 break; }default: {return tools$Crash$.impossible$50("IntModules.extract_strexp_from_topdec.no (or more than one) structure declaration");
} };
} };
} catch(v$4821) {return (function(X$3110){basis$General$.print$156(("Error while reconstructing functor body for " + (syntax_objects$FunId$.pr_FunId$51(v$3115))) + "\n");
basis$General$.print$156(X$3110[0]);
throw X$3110;
})(v$4821);
};
};
smltojs0$SmlToJsComp$$8.lookupInlineFunApp$3118 = function(ife$3121,funid$3124){var v$3137 = smltojs0$SmlToJsComp$$4.lookup$353(ife$3121,funid$3124);
var v$3139 = v$3137[1];
var v$3140 = v$3137[2];
var v$3141 = v$3137[3];
var v$3142 = v$3137[4];
var v$3134 = smltojs0$SmlToJsComp$$4.un$601(v$3142);
var v$3135 = v$3134[0];
var v$3136 = v$3134[2];
return [v$3139,v$3140,smltojs0$SmlToJsComp$$8.reelaborate$2954(funid$3124,v$3139,v$3141),v$3136,v$3135];
};
smltojs0$SmlToJsComp$$8.compile_strdecs$3143 = function(v$4795,v$4796,v$3158,v$4797){if (v$3158 == null) {return [compiler_objects$CompilerEnv$$7.emptyCEnv$4533,smltojs0$CompileBasisJS$.empty$65,smltojs0$SmlToJsComp$$5.empty$2443];
} else {var v$3210 = smltojs0$SmlToJsComp$$4.un$601(v$4796);
var v$3211 = v$3210[2];
var v$3212 = v$3210[3];
var v$3194;
switch (v$4797[0]) { case 0: {v$3194 = [v$4797[1],function(v$3204){return 0;
}];
 break; }default: {var i$3206;
var t$4831 = basis$Int32$.toString$449;
var t$4830;
(counter$2839[0] = (SmlPrims.chk_ovf_i32(counter$2839[0] + 1)),0);
t$4830 = counter$2839[0];
i$3206 = (t$4831(t$4830));
var name$3207 = special_objects$Name$.baseGet$56(0);
special_objects$Name$.baseSet$52((name$3207 + "$") + i$3206);
v$3194 = ["code" + i$3206,function(v$3209){return special_objects$Name$.baseSet$52(name$3207);
}];
} };
var v$3195 = v$3194[0];
var v$3196 = v$3194[1];
var vcg_filename$3168 = v$3195 + ".vcg";
var res$3169 = smltojs0$ExecutionJS$.compile$91([(smltojs0$SmlToJsComp$$4.un$601(v$4796))[0],function(ife$4383){return function(funid$4384){var v$4385 = smltojs0$SmlToJsComp$$4.lookup$353(ife$4383,funid$4384);
var v$4386 = v$4385[1];
var v$4387 = v$4385[2];
var v$4388 = v$4385[3];
var v$4389 = v$4385[4];
var v$4390 = smltojs0$SmlToJsComp$$4.un$601(v$4389);
var v$4391 = v$4390[0];
var v$4392 = v$4390[2];
return [v$4386,v$4387,smltojs0$SmlToJsComp$$8.reelaborate$2954(funid$4384,v$4386,v$4388),v$4392,v$4391];
};
}],[v$3211,v$3212,v$3158,vcg_filename$3168]);
v$3196(0);
var fix$4832 = {};
fix$4832.$app = function(v$4761){lab$app: while (true) {if (v$4761 == null) {return 0;
} else {var v$4762 = v$4761;
var v$4763 = v$4762[0];
var v$4764 = v$4762[1];
if (v$4763[0][2]) {0;
} else {var v$4765 = v$4763[0][1];
(v$4763[0] = [[false],v$4765,true],0);
};
var t$4833 = v$4764;
var v$4761 = t$4833;
continue lab$app;
};
};
};
var app$4760 = fix$4832.$app;
app$4760(special_objects$Name$.bucket$135[0]);
(special_objects$Name$.bucket$135[0] = null,0);
switch (res$3169[0]) { case 0: {var v$3188 = res$3169[1];
var v$3189 = v$3188[0];
var v$3190 = v$3188[1];
var v$3191 = v$3188[2];
var v$3192 = v$3188[3];
return [v$3189,v$3190,smltojs0$SmlToJsComp$$5.mk_modcode$2444(v$3191,v$3192,v$3195)];
 break; }default: {return [res$3169[1],smltojs0$CompileBasisJS$.empty$65,smltojs0$SmlToJsComp$$5.empty$2443];
} };
};
};
var fix$4834 = {};
fix$4834.$funapp_strbind = function(v$3259){var v$3275 = v$3259[1];
var v$3276 = v$3275[2];
var v$3277 = v$3275[3];
if (fix$4834.$funapp_strexp(v$3276)) {return true;
} else {switch (v$3277[0]) { case 0: {var v$3274 = v$3277[1];
return fix$4834.$funapp_strbind(v$3274);
 break; }default: {return false;
} };
};
};
fix$4834.$funapp_strdec = function(strdec$3221){switch (strdec$3221[0]) { case 0: {var v$3255 = strdec$3221[1];
var v$3256 = v$3255[1];
return fix$4834.$funapp_strbind(v$3256);
 break; }case 1: {var v$3251 = strdec$3221[1];
var v$3252 = v$3251[1];
var v$3253 = v$3251[2];
if (fix$4834.$funapp_strdec(v$3252)) {return true;
} else {return fix$4834.$funapp_strdec(v$3253);
};
 break; }case 2: {var v$3243 = strdec$3221[1];
var v$3244 = v$3243[1];
var v$3245 = v$3243[2];
if (fix$4834.$funapp_strdec(v$3244)) {return true;
} else {return fix$4834.$funapp_strdec(v$3245);
};
 break; }case 3: {return false;
 break; }default: {return false;
} };
};
fix$4834.$funapp_strexp = function(strexp$3280){switch (strexp$3280[0]) { case 1: {var v$3307 = strexp$3280[1];
var v$3308 = v$3307[1];
return fix$4834.$funapp_strdec(v$3308);
 break; }case 0: {var v$3304 = strexp$3280[1];
var v$3305 = v$3304[1];
return fix$4834.$funapp_strexp(v$3305);
 break; }case 2: {var v$3301 = strexp$3280[1];
var v$3302 = v$3301[1];
return fix$4834.$funapp_strexp(v$3302);
 break; }case 5: {return true;
 break; }case 3: {return false;
 break; }default: {var v$3313 = strexp$3280[1];
var v$3314 = v$3313[1];
var v$3315 = v$3313[2];
if (fix$4834.$funapp_strdec(v$3314)) {return true;
} else {return fix$4834.$funapp_strexp(v$3315);
};
} };
};
smltojs0$SmlToJsComp$$8.funapp_strbind$3217 = fix$4834.$funapp_strbind;
smltojs0$SmlToJsComp$$8.funapp_strdec$3218 = fix$4834.$funapp_strdec;
smltojs0$SmlToJsComp$$8.funapp_strexp$3216 = fix$4834.$funapp_strexp;
var fix$4835 = {};
fix$4835.$push_topdec = function(v$3320){switch (v$3320[0]) { case 1: {var v$3367 = v$3320[1];
var v$3368 = v$3367[0];
var v$3369 = v$3367[1];
var v$3370 = v$3367[2];
var t$4872 = [1];
var t$4871;
var t$4870;
var t$4869;
var t$4868 = v$3368;
var t$4867 = v$3369;
var t$4866;
var v$3361 = fix$4835.$push_topdec_opt(v$3370);
var v$3362 = v$3361[0];
switch (v$3362[0]) { case 0: {t$4866 = [0,[0,[v$3368,v$3362[1],v$3361[1]]]];
 break; }default: {t$4866 = v$3361[1];
} };
t$4869 = [t$4868,t$4867,t$4866];
t$4870 = [1,t$4869];
t$4871 = [0,t$4870];
return [t$4872,t$4871];
 break; }case 0: {var v$3349 = v$3320[1];
var v$3350 = v$3349[0];
var v$3351 = v$3349[1];
var v$3352 = v$3349[2];
var v$3343 = fix$4835.$push_topdec_opt(v$3352);
var v$3344 = v$3343[0];
switch (v$3344[0]) { case 0: {return [[0,[1,[v$3350,v$3351,v$3344[1]]]],v$3343[1]];
 break; }default: {return [[0,v$3351],v$3343[1]];
} };
 break; }default: {var v$3384 = v$3320[1];
var v$3385 = v$3384[0];
var v$3386 = v$3384[1];
var v$3387 = v$3384[2];
var t$4879 = [1];
var t$4878;
var t$4877;
var t$4876;
var t$4875 = v$3385;
var t$4874 = v$3386;
var t$4873;
var v$3378 = fix$4835.$push_topdec_opt(v$3387);
var v$3379 = v$3378[0];
switch (v$3379[0]) { case 0: {t$4873 = [0,[0,[v$3385,v$3379[1],v$3378[1]]]];
 break; }default: {t$4873 = v$3378[1];
} };
t$4876 = [t$4875,t$4874,t$4873];
t$4877 = [2,t$4876];
t$4878 = [0,t$4877];
return [t$4879,t$4878];
} };
};
fix$4835.$push_topdec_opt = function(v$3390){switch (v$3390[0]) { case 0: {var v$3397 = v$3390[1];
return fix$4835.$push_topdec(v$3397);
 break; }default: {return [[1],[1]];
} };
};
smltojs0$SmlToJsComp$$8.push_topdec$3317 = fix$4835.$push_topdec;
smltojs0$SmlToJsComp$$8.push_topdec_opt$3316 = fix$4835.$push_topdec_opt;
var fix$4836 = {};
fix$4836.$strdecs_of_strdec = function(v$3416,v$3417){lab$strdecs_of_strdec: while (true) {switch (v$3416[0]) { case 3: {return v$3417;
 break; }case 1: {var v$3412 = v$3416[1];
var v$3413 = v$3412[1];
var v$3414 = v$3412[2];
var t$4837 = v$3413;
var t$4838 = fix$4836.$strdecs_of_strdec(v$3414,v$3417);
var v$3416 = t$4837;
var v$3417 = t$4838;
continue lab$strdecs_of_strdec;
 break; }default: {return [v$3416,v$3417];
} };
};
};
smltojs0$SmlToJsComp$$8.strdecs_of_strdec$3398 = fix$4836.$strdecs_of_strdec;
var fix$4839 = {};
fix$4839.$int_strbind = function(v$3576,v$3577){var v$3578 = v$3577[1];
var v$3580 = v$3578[1];
var v$3581 = v$3578[2];
var v$3582 = v$3578[3];
var v$3572 = fix$4839.$int_strexp(v$3576,v$3581);
var v$3573 = v$3572[0];
var v$3574 = v$3572[1];
var v$3575 = v$3572[2];
var ce$3556 = compiler_objects$CompilerEnv$$7.declare_strid$4752(v$3580,v$3573,compiler_objects$CompilerEnv$$7.emptyCEnv$4533);
switch (v$3582[0]) { case 0: {var v$3571 = v$3582[1];
var v$3567 = fix$4839.$int_strbind(v$3576,v$3571);
var v$3568 = v$3567[0];
var v$3569 = v$3567[1];
var v$3570 = v$3567[2];
return [compiler_objects$CompilerEnv$$7.plus$4805(ce$3556,v$3568),smltojs0$CompileBasisJS$.plus$67(v$3574,v$3569),smltojs0$SmlToJsComp$$5.seq$2436(v$3575,v$3570)];
 break; }default: {return [ce$3556,v$3574,v$3575];
} };
};
fix$4839.$int_strdec = function(v$3540,v$3541){switch (v$3541[0]) { case 0: {var v$3537 = v$3541[1];
var v$3539 = v$3537[1];
return fix$4839.$int_strbind(v$3540,v$3539);
 break; }case 2: {var v$3532 = v$3541[1];
var v$3534 = v$3532[1];
var v$3535 = v$3532[2];
var v$3528 = fix$4839.$comp_int_strdec(false,v$3540,v$3534,[1]);
var v$3529 = v$3528[0];
var v$3530 = v$3528[1];
var v$3531 = v$3528[2];
var intB1$3519 = smltojs0$SmlToJsComp$$4.mk$599([smltojs0$SmlToJsComp$$4.empty$326,smltojs0$SmlToJsComp$$4.empty$479,v$3529,v$3530]);
var v$3524 = fix$4839.$comp_int_strdec(false,smltojs0$SmlToJsComp$$4.plus$610(v$3540,intB1$3519),v$3535,[1]);
var v$3525 = v$3524[0];
var v$3526 = v$3524[1];
var v$3527 = v$3524[2];
return [v$3525,smltojs0$CompileBasisJS$.plus$67(v$3530,v$3526),smltojs0$SmlToJsComp$$5.seq$2436(v$3531,v$3527)];
 break; }case 4: {return tools$Crash$.impossible$50("IntModules.int_strdec.DECstrdec.the compiler should deal with this");
 break; }case 3: {return tools$Crash$.impossible$50("IntModules.int_strdec.EMPTYstrdec.linearization failed");
 break; }default: {return tools$Crash$.impossible$50("IntModules.int_strdec.SEQstrdec.linearization failed");
} };
};
fix$4839.$comp_int_strdec = function(v$3489,v$3490,v$3491,v$3492){var fix$4862 = {};
fix$4862.$loop = function(v$4799,v$3442,v$4800){lab$loop: while (true) {if (v$3442 == null) {return smltojs0$SmlToJsComp$$8.compile_strdecs$3143(v$3489,v$4799,basis$List$.rev$641(v$4800),v$3492);
} else {var v$3484 = v$3442;
var v$3485 = v$3484[0];
var v$3486 = v$3484[1];
if ((v$3489?false:true)?(smltojs0$SmlToJsComp$$8.funapp_strdec$3218(v$3485)):false) {var v$3475 = smltojs0$SmlToJsComp$$8.compile_strdecs$3143(v$3489,v$4799,basis$List$.rev$641(v$4800),[1]);
var v$3476 = v$3475[0];
var v$3477 = v$3475[1];
var v$3478 = v$3475[2];
var intB1$3453 = smltojs0$SmlToJsComp$$4.mk$599([smltojs0$SmlToJsComp$$4.empty$326,smltojs0$SmlToJsComp$$4.empty$479,v$3476,v$3477]);
var intB$$3454 = smltojs0$SmlToJsComp$$4.plus$610(v$4799,intB1$3453);
var v$3471 = fix$4839.$int_strdec(intB$$3454,v$3485);
var v$3472 = v$3471[0];
var v$3473 = v$3471[1];
var v$3474 = v$3471[2];
var intB2$3459 = smltojs0$SmlToJsComp$$4.mk$599([smltojs0$SmlToJsComp$$4.empty$326,smltojs0$SmlToJsComp$$4.empty$479,v$3472,v$3473]);
var v$3467 = fix$4862.$loop(smltojs0$SmlToJsComp$$4.plus$610(intB$$3454,intB2$3459),v$3486,null);
var v$3468 = v$3467[0];
var v$3469 = v$3467[1];
var v$3470 = v$3467[2];
return [compiler_objects$CompilerEnv$$7.plus$4805(v$3476,compiler_objects$CompilerEnv$$7.plus$4805(v$3472,v$3468)),smltojs0$CompileBasisJS$.plus$67(v$3477,smltojs0$CompileBasisJS$.plus$67(v$3473,v$3469)),smltojs0$SmlToJsComp$$5.seq$2436(v$3478,smltojs0$SmlToJsComp$$5.seq$2436(v$3474,v$3470))];
} else {var t$4863 = v$4799;
var t$4864 = v$3486;
var t$4865 = [v$3485,v$4800];
var v$4799 = t$4863;
var v$3442 = t$4864;
var v$4800 = t$4865;
continue lab$loop;
};
};
};
};
var loop$3428 = fix$4862.$loop;
var strdecs$3488 = smltojs0$SmlToJsComp$$8.strdecs_of_strdec$3398(v$3491,null);
return loop$3428(v$3490,strdecs$3488,null);
};
fix$4839.$int_strexp = function(v$3806,v$3807){switch (v$3807[0]) { case 1: {var v$3782 = v$3807[1];
var v$3784 = v$3782[1];
return fix$4839.$comp_int_strdec(false,v$3806,v$3784,[1]);
 break; }case 3: {var v$3778 = v$3807[1];
var v$3780 = v$3778[1];
var v$3776 = smltojs0$SmlToJsComp$$4.un$601(v$3806);
var v$3777 = v$3776[2];
var v$3773 = syntax_objects$StrId$.explode_longstrid$83(v$3780);
var v$3774 = v$3773[0];
var v$3775 = v$3773[1];
var fix$4859 = {};
fix$4859.$lookup = function(v$4798,v$3766){lab$lookup: while (true) {if (v$3766 == null) {return compiler_objects$CompilerEnv$$7.lookup_strid$4886(v$4798,v$3775);
} else {var v$3769 = v$3766;
var v$3770 = v$3769[0];
var v$3771 = v$3769[1];
var t$4860 = compiler_objects$CompilerEnv$$7.lookup_strid$4886(v$4798,v$3770);
var t$4861 = v$3771;
var v$4798 = t$4860;
var v$3766 = t$4861;
continue lab$lookup;
};
};
};
var lookup$3754 = fix$4859.$lookup;
return [lookup$3754(v$3777,v$3774),smltojs0$CompileBasisJS$.empty$65,smltojs0$SmlToJsComp$$5.empty$2443];
 break; }case 0: {var v$3744 = v$3807[1];
var v$3745 = v$3744[0];
var v$3746 = v$3744[1];
var v$3740 = fix$4839.$int_strexp(v$3806,v$3746);
var v$3741 = v$3740[0];
var v$3742 = v$3740[1];
var v$3743 = v$3740[2];
var E$3727;
var v$3733;
var v$4394 = basics$ElabInfo$.to_TypeInfo$192(v$3745);
switch (v$4394[0]) { case 0: {var v$4395 = v$4394[1];
v$3733 = [0,basics$TypeInfo$.normalise$301(v$4395)];
 break; }default: {v$3733 = [1];
} };
switch (v$3733[0]) { case 0: {var v$3735 = v$3733[1];
switch (v$3735[0]) { case 3: {E$3727 = v$3735[1];
 break; }default: {E$3727 = (tools$Crash$.impossible$50("IntModules.int_strexp.TRANSPARENT_CONSTRAINTstrexp.no env info"));
} };
 break; }default: {E$3727 = (tools$Crash$.impossible$50("IntModules.int_strexp.TRANSPARENT_CONSTRAINTstrexp.no env info"));
} };
return [compiler_objects$CompilerEnv$$7.constrain$5837(v$3741,E$3727),v$3742,v$3743];
 break; }case 2: {return tools$Crash$.impossible$50("IntModules.OPAQUE_CONSTRAINTstrexp.should be eliminated at this stage");
 break; }case 5: {var v$3713 = v$3807[1];
var v$3714 = v$3713[0];
var v$3715 = v$3713[1];
var v$3716 = v$3713[2];
var s$4406 = ("[interpreting functor argument to functor " + (syntax_objects$FunId$.pr_FunId$51(v$3715))) + " begin...]";
if (tools$Flags$$1.chat$77[0]) {var s$4407 = s$4406 + "\n";
basis$TextIO$.output$101(tools$Flags$$1.log$92[0],s$4407);
} else {0;
};
var fix$4853 = {};
fix$4853.$app = function(v$4768){lab$app: while (true) {if (v$4768 == null) {return 0;
} else {var v$4769 = v$4768;
var v$4770 = v$4769[0];
var v$4771 = v$4769[1];
if (v$4770[0][2]) {0;
} else {var v$4772 = v$4770[0][1];
(v$4770[0] = [[false],v$4772,true],0);
};
var t$4854 = v$4771;
var v$4768 = t$4854;
continue lab$app;
};
};
};
var app$4767 = fix$4853.$app;
app$4767(special_objects$Name$.bucket$135[0]);
(special_objects$Name$.bucket$135[0] = null,0);
var v$3694;
var v$3704;
var v$4412 = basics$ElabInfo$.to_TypeInfo$192(v$3714);
switch (v$4412[0]) { case 0: {var v$4413 = v$4412[1];
v$3704 = [0,basics$TypeInfo$.normalise$301(v$4413)];
 break; }default: {v$3704 = [1];
} };
switch (v$3704[0]) { case 0: {var v$3706 = v$3704[1];
switch (v$3706[0]) { case 12: {var v$3708 = v$3706[1];
var v$3709 = v$3708[2];
var v$3710 = v$3708[1];
var v$3711 = v$3708[0];
v$3694 = [basics$StatObject$.oo$4663(v$3709,v$3710),v$3711];
 break; }default: {v$3694 = (tools$Crash$.impossible$50("IntModules.int_strexp.APPstrexp.no (phi,E) info"));
} };
 break; }default: {v$3694 = (tools$Crash$.impossible$50("IntModules.int_strexp.APPstrexp.no (phi,E) info"));
} };
var v$3695 = v$3694[0];
var v$3690 = fix$4839.$int_strexp(v$3806,v$3716);
var v$3691 = v$3690[0];
var v$3692 = v$3690[1];
var v$3693 = v$3690[2];
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[interpreting functor argument end...]\n")):0;
var v$3680 = smltojs0$SmlToJsComp$$4.lookup$353((smltojs0$SmlToJsComp$$4.un$601(v$3806))[0],v$3715);
var v$3681 = v$3680[0];
var v$3682 = v$3680[1];
var v$3683 = v$3680[2];
var v$3684 = v$3680[3];
var v$3685 = v$3680[4];
var E$$3629 = basics$Environments$.on_Env$3631(v$3695,v$3683);
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[constraining argument begin...]\n")):0;
var ce$3630 = compiler_objects$CompilerEnv$$7.constrain$5837(v$3691,E$$3629);
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[constraining argument end...]\n")):0;
var intB1$3631 = smltojs0$SmlToJsComp$$4.mk$599([smltojs0$SmlToJsComp$$4.empty$326,smltojs0$SmlToJsComp$$4.empty$479,compiler_objects$CompilerEnv$$7.declare_strid$4752(v$3682,ce$3630,compiler_objects$CompilerEnv$$7.emptyCEnv$4533),smltojs0$CompileBasisJS$.plus$67((smltojs0$SmlToJsComp$$4.un$601(v$3806))[3],v$3692)]);
basis$General$.print$156(((("[compiling body of functor " + (syntax_objects$FunId$.pr_FunId$51(v$3715))) + " (from project ") + v$3681) + ") begin]\n");
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[recreating functor body begin...]\n")):0;
var strexp0$3642 = smltojs0$SmlToJsComp$$8.reelaborate$2954(v$3715,v$3682,v$3684);
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[recreating functor body end...]\n")):0;
var v$3659;
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[finding free identifiers begin...]\n")):0;
var v$3674 = basics$FreeIds$.fid_strexp$2095(strexp0$3642);
var v$3675 = v$3674[0];
var v$3676 = v$3674[1];
var v$3677 = v$3674[2];
var v$3678 = v$3674[3];
var v$3679 = v$3674[4];
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[finding free identifiers end...]\n")):0;
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[restricting interpretation basis begin...]\n")):0;
var intB$$3668 = smltojs0$SmlToJsComp$$4.restrict$710(smltojs0$SmlToJsComp$$4.plus$610(v$3685,intB1$3631),[v$3675,v$3676,v$3677,v$3678,v$3679],special_objects$TyName$$3.empty$2399);
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[restricting interpretation basis end...]\n")):0;
v$3659 = [intB$$3668,v$3676];
var v$3660 = v$3659[0];
var strexp0$$3646 = basics$PostElabGrammar$$3.map_strexp_info$4217(function(i$4459){var v$4460;
var v$4462 = basics$ElabInfo$.to_TypeInfo$192(i$4459);
switch (v$4462[0]) { case 0: {var v$4463 = v$4462[1];
v$4460 = [0,basics$TypeInfo$.normalise$301(v$4463)];
 break; }default: {v$4460 = [1];
} };
switch (v$4460[0]) { case 0: {var v$4464 = v$4460[1];
return basics$ElabInfo$.plus_TypeInfo$118(i$4459,basics$TypeInfo$.on_TypeInfo$297([v$3695,v$4464]));
 break; }default: {return i$4459;
} };
},strexp0$3642);
var fix$4855 = {};
fix$4855.$app = function(v$4777){lab$app: while (true) {if (v$4777 == null) {return 0;
} else {var v$4778 = v$4777;
var v$4779 = v$4778[0];
var v$4780 = v$4778[1];
if (v$4779[0][2]) {0;
} else {var v$4781 = v$4779[0][1];
(v$4779[0] = [[false],v$4781,true],0);
};
var t$4856 = v$4780;
var v$4777 = t$4856;
continue lab$app;
};
};
};
var app$4776 = fix$4855.$app;
app$4776(special_objects$Name$.bucket$135[0]);
(special_objects$Name$.bucket$135[0] = null,0);
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[interpreting functor body begin...]\n")):0;
var v$3655 = fix$4839.$int_strexp(v$3660,strexp0$$3646);
var v$3656 = v$3655[0];
var v$3657 = v$3655[1];
var v$3658 = v$3655[2];
tools$Flags$$1.chat$77[0]?(basis$TextIO$.output$101(tools$Flags$$1.log$92[0],"[interpreting functor body end...]\n")):0;
special_objects$Name$.bucket$135[0];
var fix$4857 = {};
fix$4857.$app = function(v$4784){lab$app: while (true) {if (v$4784 == null) {return 0;
} else {var v$4785 = v$4784;
var v$4786 = v$4785[0];
var v$4787 = v$4785[1];
if (v$4786[0][2]) {0;
} else {var v$4788 = v$4786[0][1];
(v$4786[0] = [[false],v$4788,true],0);
};
var t$4858 = v$4787;
var v$4784 = t$4858;
continue lab$app;
};
};
};
var app$4783 = fix$4857.$app;
app$4783(special_objects$Name$.bucket$135[0]);
(special_objects$Name$.bucket$135[0] = null,0);
smltojs0$SmlToJsComp$$4.mk$599([smltojs0$SmlToJsComp$$4.empty$326,smltojs0$SmlToJsComp$$4.empty$479,v$3656,v$3657]);
return [[v$3656,smltojs0$CompileBasisJS$.plus$67(v$3692,v$3657),smltojs0$SmlToJsComp$$5.seq$2436(v$3693,v$3658)],basis$General$.print$156(("[compiling body of functor " + (syntax_objects$FunId$.pr_FunId$51(v$3715))) + " end]\n")][0];
 break; }default: {var v$3802 = v$3807[1];
var v$3804 = v$3802[1];
var v$3805 = v$3802[2];
var v$3798 = fix$4839.$comp_int_strdec(false,v$3806,v$3804,[1]);
var v$3799 = v$3798[0];
var v$3800 = v$3798[1];
var v$3801 = v$3798[2];
var intB1$3789 = smltojs0$SmlToJsComp$$4.mk$599([smltojs0$SmlToJsComp$$4.empty$326,smltojs0$SmlToJsComp$$4.empty$479,v$3799,v$3800]);
var v$3794 = fix$4839.$int_strexp(smltojs0$SmlToJsComp$$4.plus$610(v$3806,intB1$3789),v$3805);
var v$3795 = v$3794[0];
var v$3796 = v$3794[1];
var v$3797 = v$3794[2];
return [v$3795,smltojs0$CompileBasisJS$.plus$67(v$3800,v$3796),smltojs0$SmlToJsComp$$5.seq$2436(v$3801,v$3797)];
} };
};
smltojs0$SmlToJsComp$$8.int_strbind$3419 = fix$4839.$int_strbind;
smltojs0$SmlToJsComp$$8.int_strdec$3420 = fix$4839.$int_strdec;
smltojs0$SmlToJsComp$$8.comp_int_strdec$3421 = fix$4839.$comp_int_strdec;
smltojs0$SmlToJsComp$$8.int_strexp$3418 = fix$4839.$int_strexp;
smltojs0$SmlToJsComp$$8.generate_BBC$3808 = function(v$3850,v$3851,v$4801,v$3853,v$4802){var v$3854 = v$3853[2];
var v$3855 = v$3853[1];
var v$3856 = v$3853[0];
var v$3857 = v$3853[4];
var v$3858 = v$3853[3];
try {var funid_string$3820 = syntax_objects$FunId$.pr_FunId$51(v$3851);
var info$3825 = basics$PostElabGrammar$$3.info_on_strexp$3779(v$4802);
var v$3839;
var x$4790 = basics$ElabInfo$.to_ParseInfo$182(info$3825);
v$3839 = (basics$SourceInfo$.to_positions$58(basics$ParseInfo$.to_SourceInfo$84(x$4790)));
var v$3840 = v$3839[0];
var v$3841 = v$3839[1];
var filetext$3829 = (("structure " + funid_string$3820) + " ") + (basics$LexBasics$.get_source$544(v$3840,v$3841));
return [v$3856,v$3850,v$3855,manager0$MD5$.fromString$418(filetext$3829),filetext$3829,v$3854,v$3858,v$3857];
} catch(v$4840) {return (function(X$3846){var t$4841 = X$3846;
if (t$4841[0] == basis$IO$.en$Io$50) {var v$3849 = X$3846[1][2];
basis$General$.print$156((("Error while blasting out functor body for " + (syntax_objects$FunId$.pr_FunId$51(v$3851))) + "\n") + v$3849);
throw X$3846;
} else {throw X$3846;
};
})(v$4840);
};
};
var fix$4842 = {};
fix$4842.$int_funbind = function(v$3948,v$3949,v$3950){lab$int_funbind: while (true) {var v$3951 = v$3950[1];
var v$3952 = v$3951[0];
var v$3953 = v$3951[1];
var v$3954 = v$3951[2];
var v$3955 = v$3951[3];
var v$3956 = v$3951[4];
var v$3957 = v$3951[5];
var v$3942 = basics$FreeIds$.fid_strexp_sigexp$2096(v$3954,v$3956,v$3955);
var v$3943 = v$3942[0];
var v$3944 = v$3942[2];
var v$3945 = v$3942[1];
var v$3946 = v$3942[3];
var v$3947 = v$3942[4];
var intB0$3880 = smltojs0$SmlToJsComp$$4.restrict$710(v$3949,[v$3943,v$3945,v$3944,v$3946,v$3947],special_objects$TyName$$3.empty$2399);
var v$3899;
var v$3912;
var v$4507 = basics$ElabInfo$.to_TypeInfo$192(v$3952);
switch (v$4507[0]) { case 0: {var v$4508 = v$4507[1];
v$3912 = [0,basics$TypeInfo$.normalise$301(v$4508)];
 break; }default: {v$3912 = [1];
} };
switch (v$3912[0]) { case 0: {var v$3914 = v$3912[1];
switch (v$3914[0]) { case 13: {var v$3916 = v$3914[1];
var v$3917 = v$3916[3];
switch (v$3917[0]) { case 0: {var v$3936 = v$3916[1];
var v$3937 = v$3916[2];
var v$3938 = v$3916[0];
var v$3939 = v$3916[4];
var v$3940 = v$3917[1];
var elabB$3905 = v$3937[0];
var infB$3919;
var v$3925 = basics$ParseInfo$.to_DFInfo$93(basics$ElabInfo$.to_ParseInfo$182(v$3952));
switch (v$3925[0]) { case 0: {var v$3927 = v$3925[1];
switch (v$3927[0]) { case 5: {infB$3919 = v$3927[1];
 break; }default: {infB$3919 = (tools$Crash$.impossible$50("IntModules.int_funbind.no infix basis info"));
} };
 break; }default: {infB$3919 = (tools$Crash$.impossible$50("IntModules.int_funbind.no infix basis info"));
} };
v$3899 = [v$3936,[special_objects$TyName$$3.list$2937(v$3938),elabB$3905,infB$3919,v$3940,v$3939]];
 break; }default: {v$3899 = (tools$Crash$.impossible$50("IntModules.int_funbind.no type info"));
} };
 break; }default: {v$3899 = (tools$Crash$.impossible$50("IntModules.int_funbind.no type info"));
} };
 break; }default: {v$3899 = (tools$Crash$.impossible$50("IntModules.int_funbind.no type info"));
} };
var v$3900 = v$3899[0];
var v$3901 = v$3899[1];
var BBC$3889 = smltojs0$SmlToJsComp$$8.generate_BBC$3808(v$3948,v$3953,v$3954,v$3901,v$3956);
var fe$3890 = smltojs0$SmlToJsComp$$4.add$340(v$3953,[v$3948,v$3954,v$3900,BBC$3889,intB0$3880],smltojs0$SmlToJsComp$$4.empty$326);
switch (v$3957[0]) { case 0: {var v$3898 = v$3957[1];
var fe$$3897 = fix$4842.$int_funbind(v$3948,v$3949,v$3898);
return smltojs0$SmlToJsComp$$4.plus$328(fe$3890,fe$$3897);
 break; }default: {return fe$3890;
} };
};
};
smltojs0$SmlToJsComp$$8.int_funbind$3860 = fix$4842.$int_funbind;
var fix$4843 = {};
fix$4843.$int_sigbind = function(v$3962){var v$3988 = v$3962[1];
var v$3989 = v$3988[0];
var v$3990 = v$3988[1];
var v$3991 = v$3988[3];
var T$3968;
var v$3974;
var v$4533 = basics$ElabInfo$.to_TypeInfo$192(v$3989);
switch (v$4533[0]) { case 0: {var v$4534 = v$4533[1];
v$3974 = [0,basics$TypeInfo$.normalise$301(v$4534)];
 break; }default: {v$3974 = [1];
} };
switch (v$3974[0]) { case 0: {var v$3976 = v$3974[1];
switch (v$3976[0]) { case 4: {T$3968 = v$3976[1];
 break; }default: {T$3968 = (tools$Crash$.impossible$50("IntModules.int_sigbind; no type info"));
} };
 break; }default: {T$3968 = (tools$Crash$.impossible$50("IntModules.int_sigbind; no type info"));
} };
var ise$3980 = smltojs0$SmlToJsComp$$4.add$493(v$3990,T$3968,smltojs0$SmlToJsComp$$4.empty$479);
var v$3985 = fix$4843.$int_sigbind_opt(v$3991);
switch (v$3985[0]) { case 0: {var v$3987 = v$3985[1];
return smltojs0$SmlToJsComp$$4.plus$481(ise$3980,v$3987);
 break; }default: {return ise$3980;
} };
};
fix$4843.$int_sigbind_opt = function(v$3994){switch (v$3994[0]) { case 1: {return [1];
 break; }default: {var v$4000 = v$3994[1];
return [0,fix$4843.$int_sigbind(v$4000)];
} };
};
smltojs0$SmlToJsComp$$8.int_sigbind$3959 = fix$4843.$int_sigbind;
smltojs0$SmlToJsComp$$8.int_sigbind_opt$3958 = fix$4843.$int_sigbind_opt;
smltojs0$SmlToJsComp$$8.int_sigdec$4001 = function(v$4004){var v$4008 = v$4004[1];
var v$4009 = v$4008[1];
return smltojs0$SmlToJsComp$$8.int_sigbind$3959(v$4009);
};
var fix$4844 = {};
fix$4844.$flatten = function(v$4025,v$4803){lab$flatten: while (true) {switch (v$4025[0]) { case 1: {return [v$4025[1],v$4803];
 break; }default: {var v$4029 = v$4025[1];
var v$4030 = v$4029[0];
var v$4031 = v$4029[1];
var t$4845 = v$4030;
var t$4846 = fix$4844.$flatten(v$4031,v$4803);
var v$4025 = t$4845;
var v$4803 = t$4846;
continue lab$flatten;
} };
};
};
smltojs0$SmlToJsComp$$8.flatten$4012 = fix$4844.$flatten;
var fix$4847 = {};
fix$4847.$int_topdec = function(v$4126,v$4127,v$4128,v$4129,v$4130){switch (v$4130[0]) { case 0: {var v$4100 = v$4130[1];
var v$4102 = v$4100[1];
var v$4103 = v$4100[2];
var v$4096 = smltojs0$SmlToJsComp$$8.comp_int_strdec$3421(v$4126,v$4129,v$4102,v$4127);
var v$4097 = v$4096[0];
var v$4098 = v$4096[1];
var v$4099 = v$4096[2];
var intB1$4082 = smltojs0$SmlToJsComp$$4.mk$599([smltojs0$SmlToJsComp$$4.empty$326,smltojs0$SmlToJsComp$$4.empty$479,v$4097,v$4098]);
switch (v$4103[0]) { case 0: {var v$4095 = v$4103[1];
var v$4092 = fix$4847.$int_topdec(v$4126,[1],v$4128,smltojs0$SmlToJsComp$$4.plus$610(v$4129,intB1$4082),v$4095);
var v$4093 = v$4092[0];
var v$4094 = v$4092[1];
return [[0,[[1,intB1$4082],v$4093]],smltojs0$SmlToJsComp$$5.seq$2436(v$4099,v$4094)];
 break; }default: {return [[1,intB1$4082],v$4099];
} };
 break; }case 1: {var v$4073 = v$4130[1];
var v$4075 = v$4073[1];
var v$4076 = v$4073[2];
var ise$4058;
var v$4544 = v$4075[1];
var v$4545 = v$4544[1];
ise$4058 = (smltojs0$SmlToJsComp$$8.int_sigbind$3959(v$4545));
var intB1$4059 = smltojs0$SmlToJsComp$$4.mk$599([smltojs0$SmlToJsComp$$4.empty$326,ise$4058,compiler_objects$CompilerEnv$$7.emptyCEnv$4533,smltojs0$CompileBasisJS$.empty$65]);
switch (v$4076[0]) { case 0: {var v$4072 = v$4076[1];
var v$4069 = fix$4847.$int_topdec(v$4126,v$4127,v$4128,smltojs0$SmlToJsComp$$4.plus$610(v$4129,intB1$4059),v$4072);
return [[0,[[1,intB1$4059],v$4069[0]]],v$4069[1]];
 break; }default: {return [[1,intB1$4059],smltojs0$SmlToJsComp$$5.empty$2443];
} };
 break; }default: {var v$4119 = v$4130[1];
var v$4121 = v$4119[1];
var v$4122 = v$4121[1];
var v$4124 = v$4122[1];
var v$4125 = v$4119[2];
var fe$4104 = smltojs0$SmlToJsComp$$8.int_funbind$3860(v$4128,v$4129,v$4124);
var intB1$4105 = smltojs0$SmlToJsComp$$4.mk$599([fe$4104,smltojs0$SmlToJsComp$$4.empty$479,compiler_objects$CompilerEnv$$7.emptyCEnv$4533,smltojs0$CompileBasisJS$.empty$65]);
switch (v$4125[0]) { case 0: {var v$4118 = v$4125[1];
var v$4115 = fix$4847.$int_topdec(v$4126,v$4127,v$4128,smltojs0$SmlToJsComp$$4.plus$610(v$4129,intB1$4105),v$4118);
return [[0,[[1,intB1$4105],v$4115[0]]],v$4115[1]];
 break; }default: {return [[1,intB1$4105],smltojs0$SmlToJsComp$$5.empty$2443];
} };
} };
};
smltojs0$SmlToJsComp$$8.int_topdec$4033 = fix$4847.$int_topdec;
smltojs0$SmlToJsComp$$8.interp_aux$4131 = function(v$4176,v$4177,v$4178,v$4179,v$4180){var v$4147 = smltojs0$SmlToJsComp$$8.push_topdec$3317(v$4179);
var v$4148 = v$4147[0];
switch (v$4148[0]) { case 0: {var v$4172 = v$4148[1];
var v$4173 = v$4147[1];
var v$4168 = smltojs0$SmlToJsComp$$8.comp_int_strdec$3421(v$4176,v$4178,v$4172,[0,v$4180]);
var v$4169 = v$4168[0];
var v$4170 = v$4168[1];
var v$4171 = v$4168[2];
var intB1$4154 = smltojs0$SmlToJsComp$$4.mk$599([smltojs0$SmlToJsComp$$4.empty$326,smltojs0$SmlToJsComp$$4.empty$479,v$4169,v$4170]);
switch (v$4173[0]) { case 0: {var v$4167 = v$4173[1];
var v$4164 = smltojs0$SmlToJsComp$$8.int_topdec$4033(v$4176,[1],v$4177,smltojs0$SmlToJsComp$$4.plus$610(v$4178,intB1$4154),v$4167);
var v$4165 = v$4164[0];
var v$4166 = v$4164[1];
return [[0,[[1,intB1$4154],v$4165]],smltojs0$SmlToJsComp$$5.seq$2436(v$4171,v$4166)];
 break; }default: {return [[1,intB1$4154],v$4171];
} };
 break; }default: {var v$4174 = v$4147[1];
switch (v$4174[0]) { case 1: {return [[1,smltojs0$SmlToJsComp$$4.empty$609],smltojs0$SmlToJsComp$$5.empty$2443];
 break; }default: {var v$4175 = v$4174[1];
return smltojs0$SmlToJsComp$$8.int_topdec$4033(v$4176,[0,v$4180],v$4177,v$4178,v$4175);
} };
} };
};
smltojs0$SmlToJsComp$$8.interp$4181 = function(v$4213,v$4214,v$4215,v$4216,v$4217){var v$4210 = smltojs0$SmlToJsComp$$8.interp_aux$4131(v$4213,v$4214,v$4215,v$4216,v$4217);
var v$4211 = v$4210[0];
var v$4212 = v$4210[1];
var v$4198 = basis$Path$.splitDirFile$502(v$4217);
var v$4199 = v$4198[0];
var v$4200 = v$4198[1];
try {basis$Path$.concat$209(basis$Path$.concat$209(v$4199,"MLB/Js0"),v$4200);
} catch(v$4848) {(function(v$4197){return tools$Crash$.impossible$50("IntModules.concat");
})(v$4848);
};
var intBs$4203 = smltojs0$SmlToJsComp$$8.flatten$4012(v$4211,null);
var t$4852;
var fix$4849 = {};
fix$4849.$foldl = function(v$4560,v$4561){lab$foldl: while (true) {if (v$4561 == null) {return v$4560;
} else {var v$4562 = v$4561;
var v$4563 = v$4562[0];
var v$4564 = v$4562[1];
var t$4850 = smltojs0$SmlToJsComp$$4.plus$610(v$4560,v$4563);
var t$4851 = v$4564;
var v$4560 = t$4850;
var v$4561 = t$4851;
continue lab$foldl;
};
};
};
var foldl$4559 = fix$4849.$foldl;
t$4852 = (foldl$4559(smltojs0$SmlToJsComp$$4.empty$609,intBs$4203));
return [t$4852,v$4212];
};
return 0;
})();
